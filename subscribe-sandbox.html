<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sandbox Subscribe - Crypto Alerts Premium (EUR)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- SANDBOX PayPal SDK (use your SANDBOX Client ID) -->
    <script src="https://www.sandbox.paypal.com/sdk/js?client-id=YOUR_SANDBOX_CLIENT_ID&vault=true&intent=subscription&currency=EUR"></script>
    <style>
      body { font-family: system-ui, Arial; max-width: 520px; margin: 30px auto; padding: 0 16px; }
      .box { border: 1px solid #ddd; border-radius: 12px; padding: 18px; }
      .note { color: #555; font-size: 14px; }
    </style>
  </head>
  <body>
    <h2>Sandbox — Crypto Alerts Premium — €7/month</h2>
    <div class="box">
      <p>Testing mode: Sandbox payments only. No real charges.</p>
      <div id="paypal-button-container"></div>
      <p class="note">
        After approval, your Premium should activate automatically within ~1–2 minutes via webhook.  
        Back in Telegram, use <code>/premium</code> to check status.
      </p>
    </div>

    <script>
      // Read Telegram user id from query string ?uid=123
      const params = new URLSearchParams(location.search);
      const tg_uid = params.get("uid") || "0";

      paypal.Buttons({
        style: {
          shape: 'rect',
          color: 'gold',
          layout: 'vertical',
          label: 'subscribe'
        },
        createSubscription: function(data, actions) {
          return actions.subscription.create({
            plan_id: 'YOUR_SANDBOX_PLAN_ID', // e.g. P-TEST123456789
            custom_id: tg_uid                 // pass Telegram user id to your webhook
          });
        },
        onApprove: function() {
          alert("✅ Sandbox subscription approved! You will get Premium shortly.");
        }
      }).render('#paypal-button-container');
    </script>
  </body>
</html>
